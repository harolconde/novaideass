<section class="sectionWriteIdeas">
    <div class="containerIdeas"> 
          <div class="row">
              <div class="col">
                  <div class="containerWriteIdeas"> 
                      <div class="containerIdeaGeneral row">
                          <div class="col-sm-12 col-md-12 col-lg-8 col-xl-8 containerWriteIdeaBoard">
                              <label class="sr-only" for="inlineFormInputGroup"></label>
                              <div class="input-group groupMessageSend mb-2">
                                  <form class="formNewMessage">
                                      <input name="idea" id="" cols="30" rows="10" class="spaceWriteIdea" placeholder="Cual es tu idea?" required>
                                      <div class="input-group-prepend">
                                          <div class="input-group-text">
                                              <button class="btn btnPlusIdea" type="submit" value="Enviar Comentario" >
                                                  <img [src]="'assets/img/icons/dashboard/browser.svg'" alt="">
                                              </button>
                                          </div>
                                      </div>
                                  </form>
                              </div>
                          </div>
                          <div class="col-6 col-lg-2 col-xl-2 notificationDashboard">
                              <div class="notification">
                                  <span class="titleNotification">Notificaciones</span>
                                  <div class="imgAlertNotification">
                                      <img [src]="'assets/img/icons/dashboard/notification.svg'" alt="">
                                  </div>
                              </div>
                          </div>
                          <div class="col-6 col-lg-2 col-xl-2 menuHamburgerDashboard">
                              <div class="menuHamburguer">
                                  <span class="titleMenu">Menu</span>
                                  <button class="navbar-toggler" (click)="showMenuNav()">
                                      <img [src]="'assets/img/icons/dashboard/hamburguer.svg'" alt="">
                                  </button>
                              </div>
                              <div class="menuNav" *ngIf="menuComponents">
                                  <ul class="list-group list-group-flush"> 
                                      <li class="list-group-item">
                                          <a [routerLink]="'/dashboard'">
                                              <span>
                                                  <img [src]="'assets/img/icons/dates/ovalGrey.svg'" alt="">
                                              </span> 
                                              <span>
                                                  Dashboard
                                              </span>
                                          </a>
                                      </li>
                                      <li class="list-group-item">
                                          <a [routerLink]="'/postuladas'">
                                              <span>
                                                  <img [src]="'assets/img/icons/dates/ovalGrey.svg'" alt="">
                                              </span> 
                                              <span>
                                                  Ideas postuladas
                                              </span>
                                          </a>
                                      </li>
                                      <li class="list-group-item">
                                          <a [routerLink]="'/aprobadas'">
                                              <span>
                                                  <img [src]="'assets/img/icons/dates/ovalGreen.svg'" alt="">
                                              </span> 
                                              <span>
                                                  Ideas aprobadas
                                              </span>
                                          </a>
                                      </li>
                                      <li class="list-group-item">
                                          <a [routerLink]="'/debate'">
                                              <span>
                                                  <img [src]="'assets/img/icons/dates/ovalOrange.svg'" alt="">
                                              </span> 
                                              <span>
                                                  Ideas en debate
                                              </span>
                                          </a>
                                      </li>
                                      <li class="list-group-item">
                                          <a [routerLink]="'/finalizadas'">
                                              <span>
                                                  <img [src]="'assets/img/icons/dates/ovalRed.svg'" alt="">
                                              </span> 
                                              <span>
                                                  Ideas finalizadas
                                              </span>
                                          </a>
                                      </li>
                                      <li class="list-group-item">
                                          <a [routerLink]="'/muertas'">
                                              <span>
                                                  <img [src]="'assets/img/icons/dates/ovalBlack.svg'" alt="">
                                              </span> 
                                              <span>
                                                  Ideas muertas
                                              </span>
                                          </a>
                                      </li>
                                  </ul>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
    </div>
</section>
<section class="sectionPerfilUser">
    <div class="containerPerfilUser">
        <div class="row">
            <div class="col-12">
                <div class="titleDashboard">
                    <h3>Mi perfil</h3>
                </div>
                <hr>
            </div>
            <div class="containerCardPerfilUser">
                <div class="row">
                    <div class="col-sm-12 col-md-12 col-lg-3 col-xl-3 containerDatesPerfilUser containerCardPerfil">
                        <div class="card datesPerfilUser">
                            <div class="cardheader" data-toggle="tooltip" data-placement="bottom" title="Editar">
                                <img class="imgPerfilUser" src="{{getImgUser(userDataPerfil.IdUsers)}}" alt="">
                                <button class="btnImgPerfilUser" data-toggle="modal" data-target="#exampleModalCenter">
                                    <img src="assets/img/icons/perfilUser/pencil-edit-buttons.svg" alt="" class="imgEditPerfil">
                                </button>
                            </div>
                            <div class="namePerfilUser"> 
                                <span>{{userDataPerfil.UserFirstName}} {{userDataPerfil.UserLastName}}</span>
                                <label>{{userDataPerfil.User_type_desc}}</label>
                            </div>
                            <div class="card-body">
                                <form>
                                    <div class="form-group">
                                        <label for="formGroupExampleInput">Nickname</label>
                                        <input type="text" class="form-control" id="formGroupExampleInput" placeholder="{{userDataPerfil.UserNickName}}">
                                    </div>
                                </form>
                                <label for="formGroupExampleInput2">Correo</label>
                                <span class="emailPerfilUser">{{userDataPerfil.UserEmail}}</span>
                            </div>
                            <div class="card-footer">
                                <button class="btnEditPerfilUser">Guardar cambios</button>
                            </div>
                        </div>
                        <div class="card cardPqr">
                            <div class="card-title">
                                <h4>PQR</h4>
                            </div>
                            <div class="car-body">
                                <button class="btn btn-block" data-toggle="modal" data-target=".bd-example-modal-xl">Nuevo mensaje interno</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-12 col-lg-9 col-xl-9">
                        <div class="row">
                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                <div class="card ideasPostuladas">
                                    <div class="card-title"> <span>Mis ideas mas votadas</span> </div>
                                    <div class="card-content">
                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item" *ngFor="let ideaV of ideasMoreVotes; index as i">
                                                <div class="containerUserTop imgUserIdeaTop">
                                                    <div class="imgUserTop">
                                                        <img [src]="'assets/img/icons/dashboard/idea.svg'" alt="">
                                                    </div>
                                                    <div class="topParticipation topIdeaPercentage">
                                                        <div class="topParticipationNamePercentage topParticipationIdeaPercentage">
                                                            <span class="nameUserTop contentIdeaTop"> {{ideaV.IdeasDTO.IdeaText}} </span>
                                                            <span class="percentage percentagetIdeaTop">{{ideaV.CountIdeasVotadas}}</span>
                                                        </div>
                                                        <div class="progress">
                                                            <div class="progress-bar" role="progressbar" [ngStyle]="{'width': ideaV.CountIdeasVotadas +'%'}" aria-valuenow="20" aria-valuemin="0" aria-valuemax="20"></div>
                                                        </div>
                                                    </div>
                                                </div> 
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 containerCardTodas containerCardPerfil">
                                <div class="card todasMisIdeas">
                                    <div class="card-title"> <span>Todas mis ideas</span> </div>
                                    <div class="card-body">
                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item" *ngFor="let ideaAll of ideasForUser; index as i">
                                                <span class="spinnerIdea">.</span>
                                                <span class="contenIdeaText"> {{ideaAll.IdeasDTO.IdeaText}} </span>
                                                <div class="contentIconIdeaText">
                                                    <button class="btnIconIdeaText" [routerLink]="['/idea', ideaAll.IdeasDTO.IdIdeas]"><img [src]="'assets/img/icons/dashboard/eye.svg'" alt=""></button>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="card-footer">
                                        <button class="btn btn-block btnSeeMore" [routerLink]="'/usuario-todas'">Ver más</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6">
                                <div class="card misOpiniones">
                                    <div class="card-title"> <span>Mis opiniones</span> </div>
                                    <div class="card-body">
                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item" *ngFor="let commentFU of commentsForUser; index as i">
                                                <span class="spinnerIdea">.</span>
                                                <span class="contenIdeaText">
                                                    {{commentFU.CommentsDTO.Comment}}
                                                </span>
                                                <div class="contentIconIdeaText">
                                                    <button class="btnIconIdeaText" [routerLink]="['/idea', commentFU.CommentsDTO.CommentIdIdea]"><img [src]="'assets/img/icons/dashboard/eye.svg'" alt=""></button>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="card-footer">
                                        <button class="btn btn-block btnSeeMore" [routerLink]="'/usuario-comentarios'">Ver más</button>
                                    </div>        
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalCenterTitle">Selecciona un nuevo avatar o sube una foto.</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="cancelSelectIdea()">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="containerImgsUserSelection">
                    <div class="titleModalBody">
                        <span>- Selecciona alguno de los avatares que tenemos disponibles.</span>
                    </div>
                    <div class="imgPerfilSelected" > 
                        <div class="imgSelected" (click)="getNameImg(id)" id="img1" *ngFor="let img of imgs; index as i">
                            <img src="{{img.source}}" alt="" class="imgSelectChange" [id]="img.id">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="exampleRadios" [id]="img.id" value="option1">
                            </div>
                        </div>
                        <!-- <div class="imgSelected" (click)="getNameImg(id)" id="img2">
                            <img [src]="'/images/03.svg'" alt="" class="imgSelectChange" id="03">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="option2">
                            </div>
                        </div>
                        <div class="imgSelected" (click)="getNameImg(id)" id="img03">
                            <img [src]="'/images/04.svg'" alt="" class="imgSelectChange" id="04">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios3" value="option3">
                            </div>
                        </div>
                        <div class="imgSelected" (click)="getNameImg(id)" id="img04">
                            <img [src]="'/images/01.svg'" alt="" class="imgSelectChange" id="01">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios4" value="option4">
                            </div>
                        </div>
                        <div class="imgSelected" (click)="getNameImg(id)" id="img05">
                            <img [src]="'/images/02.svg'" alt="" class="imgSelectChange" id="02">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios5" value="option5">
                            </div>
                        </div> -->
                    </div>
                    <div class="titleModalBody">
                        <span>- Sube una imagen.</span> 
                    </div>
                    <div class="imgUpload">
                        <div class="containerImgUpload" id="containerImgUpload">
                            <img id="upload" [src]="imgSrc"  alt="">
                        </div>
                        <div class="containerBtnUpload">
                            <input type="file"  id="imgUpload" class="inputUpload"  accept="image/*" (change)="selectImg($event.target.files);">
                            <label for="imgUpload">
                                <!-- <button class="btn btn-secondary btn-lg btnUpload">
                                    <span>Subir archivo</span>
                                </button> -->
                                <span class="btn btn-secondary btn-lg btnUpload">Subir archivo</span>
                            </label> 
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btnModal btnCancel" data-dismiss="modal" (click)="cancelSelectIdea()">Cancelar</button>
                <button type="button" class="btn btn-primary btnModal btnSave" (click)="getMimeType()">Guardar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Mensaje interno o PQR -->
<div class="modal fade bd-example-modal-xl modalPQR" id="modalPQR" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <form [formGroup] = "formInternal" (ngSubmit) = "postInternalIdeas(formInternal.value)">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalCenterTitle">Escribenos tus sugerencias</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="card cardAffair"> 
                        <div class="selectAffair">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1">
                                <label class="form-check-label" for="inlineRadio1">Peticion</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2">
                                <label class="form-check-label" for="inlineRadio2">Queja</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio3" value="option3">
                                <label class="form-check-label" for="inlineRadio3">Reclamo</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio4" value="option4">
                                <label class="form-check-label" for="inlineRadio4">Sugerencia</label>
                            </div>
                        </div>
                    </div>
                    <div class="pqrText">
                        <textarea name="" id="textSendPQR" cols="30" rows="10" formControlName="mensaje">

                        </textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary btnCancelPQR" data-dismiss="modal" (click)="reset()">Cancelar</button>
                    <button type="submit" class="btn btn-primary btnSubmitPQR" (click)="hideModalsAll()">Enviar</button>
                </div>
            </form>    
        </div>
    </div>
</div>

<!-- Toast respuesta envio de mensaje -->
<ng-container *ngIf="ideaInterna"> 
    <div class="contentToast contentToastOk" id="contentToastOk" aria-live="polite" aria-atomic="true" >
        <div class="toast" style="position: absolute; top: 0; right: 0;">
          <div class="toast-header">
            <img [src]="'assets/img/icons/dashboard/idea.svg'" class="rounded mr-2" alt="...">
            <strong class="mr-auto">Bootstrap</strong>
            <small>Justo Ahora</small>
            <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close" (click)="closeToast()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="toast-body">
                <div class="iconToastBody">
                    <span>Se ha enviado tu mensaje o peticion.</span>
                    <i class="fas fa-paper-plane icon messageSendOk"></i>
                </div>
          </div>
        </div>
      </div>
</ng-container>
<ng-template *ngIf="respInternaWrong">
    <div class="contentToast contentToastFalse" id="contentToastFalse" aria-live="polite" aria-atomic="true" >
        <div class="toast">
          <div class="toast-header">
            <img [src]="'assets/img/icons/dashboard/idea.svg'" class=" mr-2" alt="...">
            <strong class="mr-auto">Novaideas</strong>
            <small>Justo ahora</small>
            <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close" (click)="closeToast()">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="toast-body">
                <div class="iconToastBody">
                    <span>No se ha podido enviar tu mensaje o peticion.</span>
                    <i class="fas fa-exclamation-triangle icon messageSendError"></i>
                </div>
          </div>
        </div>
      </div>
</ng-template>
